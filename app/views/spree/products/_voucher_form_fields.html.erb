<%# this is an example view of how I see this extension being used %>

<%# I'm assuming we'll have a voucher @product passed in %>

<%# if @product.voucher? .... %>

<% if @product.taxons.map(&:name).include?('Gift Card') %>
  <% param_prefix = "options[vouchers_attributes][]" %>
  <%= hidden_field_tag "#{param_prefix}[currency]", current_currency %>

  <fieldset>
    From: <%= text_field_tag "#{param_prefix}[voucher_from]", spree_current_user.try(:name) %>
  </fieldset>

  <fieldset>
    To: <%= text_field_tag "#{param_prefix}[voucher_to]", '', placeholder: 'example@domain.com' %>
  </fieldset>

  <fieldset>
    Message: <%= text_field_tag "#{param_prefix}[message]", 'Gift Card' %>
  </fieldset>

  <fieldset>
    Amount: <%= number_field_tag "#{param_prefix}[original_amount]", 0 %>
  </fieldset>

  <fieldset>
    Deliver by email: <%= radio_button_tag "#{param_prefix}[delivery_method]", "email", true, id: 'email_delivery' %>
    Deliver by
    mail: <%= radio_button_tag "#{param_prefix}[delivery_method]", "physical", false, id: 'physical_delivery' %>
  </fieldset>

  <fieldset id="voucher_address" style="display: none;">
    <legend align="center">Voucher Address</legend>
    <%= render :partial => 'voucher_address', :locals => {:form => f, :address_type => 'voucher_address', :address => Spree::Address.new(country: Spree::Country.first), :param_prefix => "#{param_prefix}[address_attributes]"} %>
  </fieldset>
<% end %>